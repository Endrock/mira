<div class="installments">
  <div class="container">
    <div class="installments-inner">
      <h2>Pay in 4 interest-free installmentsâ€”from $20.67/mo</h2>
      <button id="button-view-details" class="bf-add-cart-btn btn-custom button">View details</button>

      <div class="hidden">
        {%- assign product_form_installment_id = 'product-form-installment-' | append: section.id -%}
        {%- form 'product', product, id: product_form_installment_id, class: 'installment caption-large' -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          {{ form | payment_terms }}
        {%- endform -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Installments",
  "settings": [],
  "presets": [
    {
      "name": "Installments"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
  document.getElementById('button-view-details').addEventListener('click', () => {
    let button = document
      .querySelector('shopify-payment-terms')
      .shadowRoot.querySelector('shop-pay-installments-banner')
      .shadowRoot.querySelector('#shopify-installments')
      .querySelector('#shopify-installments-cta');

    button.click();
  });
{% endjavascript %}
